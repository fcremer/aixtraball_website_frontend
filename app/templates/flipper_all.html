{#  app/templates/flipper_all.html  #}
{% extends "base.html" %}

{% block head_extra %}
  <style>
    /* Hero‑Bild ----------------------------------------------------- */
    .hero-flipper{
      background:url('{{ url_for("static", filename="images/else/50s.jpg") }}') center/cover;
      min-height:45vh;
    }
    .hero-flipper .overlay{background:rgba(var(--bs-primary-rgb),.65);}

    /* Timeline ------------------------------------------------------ */
    .timeline{position:relative;padding:2rem 0;}
    .timeline::before{content:"";position:absolute;top:0;bottom:0;left:50%;width:4px;background:var(--bs-primary);transform:translateX(-50%);}
    .timeline-item{position:relative;width:50%;padding:1rem 2rem;margin-bottom:2rem;transform:translateY(30px);transition:transform .6s ease-out;}
    .timeline-item.show{transform:none;}
    .timeline-item .timeline-year{font-weight:700;}
    .timeline-item::after{content:"";position:absolute;top:1.2rem;width:16px;height:16px;border-radius:50%;background:#fff;border:4px solid var(--bs-primary);}
    .timeline-item:nth-of-type(odd){left:0;text-align:right;}
    .timeline-item:nth-of-type(odd)::after{right:-8px;}
    .timeline-item:nth-of-type(even){left:50%;}
    .timeline-item:nth-of-type(even)::after{left:-8px;}
    @media (max-width:767.98px){
      .timeline::before{left:8px;transform:none;}
      .timeline-item{width:100%;padding-left:2.5rem;text-align:left;}
      .timeline-item:nth-of-type(odd),
      .timeline-item:nth-of-type(even){left:0;}
      .timeline-item::after{left:0;}
    }

    /* Jahrzehnt‑Badges --------------------------------------------- */
    .decade-badge{
      display:inline-block;
      padding:.25rem .5rem;
      border-radius:.25rem;
      background:rgba(var(--bs-primary-rgb),.08);
      color:var(--bs-primary);
      font-size:.75rem;
      letter-spacing:.5px;
      text-transform:uppercase;
    }

    /* Dezente Hintergrundfarben pro Jahrzehnt ----------------------- */
    .timeline-item.decade-1970,
    .timeline-item.decade-1990,
    .timeline-item.decade-2010,
    .timeline-item.decade-2030{
      background:rgba(var(--bs-primary-rgb),.03);
    }
    .timeline-item.decade-1980,
    .timeline-item.decade-2000,
    .timeline-item.decade-2020{
      background:rgba(var(--bs-primary-rgb),.06);
    }
  </style>
{% endblock %}

{% block content %}
<!-- Hero --------------------------------------------------------------- -->
<header class="hero-flipper d-flex align-items-center text-white text-center">
  <div class="container overlay py-5">
    <h1 class="display-4 fw-bold">Unsere Flipper‑Epochen</h1>
    <p class="lead mb-0">Von early-electronic Klassikern bis zu modernen Stern‑Titeln</p>
  </div>
</header>

<!-- Intro‑Text ---------------------------------------------------------- -->
<section class="py-5">
  <div class="container">
    <p class="lead">
      Begib dich mit uns auf eine kleine Zeitreise!  
      Wir haben für dich die Highlights unserer Sammlung chronologisch
      aufbereitet – vom ältesten Automaten der 70er Jahre bis zum neuesten Gerät.
    </p>
  </div>
</section>

<!-- Timeline ------------------------------------------------------------ -->
<section class="py-5 bg-light">
  <div class="container">
    <h2 class="text-center mb-5">Die Reise beginnt …</h2>

    <div class="timeline">
      {% for f in flippers %}
      <div class="timeline-item decade-{{ (f.year // 10) * 10 }}">
        <span class="timeline-year">
          {{ f.year }}<span class="decade-badge ms-2">{{ f.decade_label }}</span>
        </span>
        <h3 class="h5 mt-2">{{ f.name }}</h3>
        {% if f.image %}
          <img src="{{ f.image | asset }}" class="img-fluid rounded shadow my-3" alt="{{ f.name }}">
        {% endif %}
        {% if f.link %}
          <p><a href="{{ f.link }}" target="_blank">Mehr zum Gerät<i class="bi bi-box-arrow-up-right ms-1"></i></a></p>
        {% endif %}
      </div>
      {% endfor %}
    </div>
  </div>
</section>

<!-- CTA --------------------------------------------------------------- -->
<section class="py-5 text-center">
  <div class="container">
    <h2 class="mb-3">Selbst spielen – live vor Ort!</h2>
    <p class="lead mb-4">
      Komm an unserem nächsten Öffnungstag vorbei und teste deine Lieblingsgeräte
      aus jeder Epoche.
    </p>
    <a class="btn btn-primary btn-lg" href="{{ url_for('preise') }}">Preise &amp; Besuch</a>
  </div>
</section>
{% endblock %}

{% block scripts_extra %}
  {{ super() }}
  <script>
    /* Slide‑In Animation für die Timeline */
    window.addEventListener('load', () => {
      const items = document.querySelectorAll('.timeline-item');
      if (!('IntersectionObserver' in window)) { items.forEach(i=>i.classList.add('show')); return; }
      const io = new IntersectionObserver((entries,obs)=>{
        entries.forEach(e=>{
          if(e.isIntersecting){ e.target.classList.add('show'); obs.unobserve(e.target); }
        });
      },{threshold:.15});
      items.forEach(el=>io.observe(el));
    });
  </script>
{% endblock %}