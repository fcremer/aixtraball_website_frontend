{% extends "base.html" %}
{% block head_extra %}
  <style>
    /* -------------------------------------------------------------
       Vereins‑Akzentfarbe (#D23729)
       ------------------------------------------------------------- */
    .hero-bg{
      background:url('{{ url_for("static", filename="images/else/r10.png") }}') center/cover;
    }
    .hero-overlay{background:rgba(var(--bs-primary-rgb),.70);}
    .accordion-button:not(.collapsed){
      background:rgba(var(--bs-primary-rgb),.15);
      color:var(--bs-primary);
    }
    .accordion-button::after{filter:hue-rotate(-10deg) saturate(200%);}
    .btn-light:hover,
    .btn-light:focus{background:rgba(var(--bs-primary-rgb),.10);color:var(--bs-primary);}

    /* -------------------------------------------------------------
       Timeline
       ------------------------------------------------------------- */
    .timeline{position:relative;padding:2rem 0;}
    .timeline::before{content:"";position:absolute;top:0;bottom:0;left:50%;width:4px;background:var(--bs-primary);transform:translateX(-50%);}
    .timeline-item{position:relative;width:50%;padding:1rem 2rem;margin-bottom:2rem;transform:translateY(30px);transition:transform .6s ease-out;}
    .timeline-item.show{transform:none;}
    .timeline-item .timeline-date{font-weight:700;color:var(--bs-primary);}
    .timeline-item::after{content:"";position:absolute;top:1.2rem;width:16px;height:16px;border-radius:50%;background:#fff;border:4px solid var(--bs-primary);}
    .timeline-item:nth-of-type(odd){left:0;text-align:right;}
    .timeline-item:nth-of-type(odd)::after{right:-8px;}
    .timeline-item:nth-of-type(even){left:50%;}
    .timeline-item:nth-of-type(even)::after{left:-8px;}
    @media(max-width:767.98px){
      .timeline::before{left:8px;transform:none;}
      .timeline-item{width:100%;padding-left:2.5rem;text-align:left;}
      .timeline-item:nth-of-type(odd),
      .timeline-item:nth-of-type(even){left:0;}
      .timeline-item::after{left:0;}
    }

    /* Hintergrund für die Timeline */
    .timeline-section {
      position: relative;
      background-size: auto;
      background-position: center;
      background-repeat: repeat;
      border-bottom: 2px solid rgba(var(--bs-primary-rgb), 0.5);
    }
    .timeline-section::before {
      content: "";
      position: absolute;
      top: 0; left: 0; right: 0; bottom: 0;
      pointer-events: none;
      background: linear-gradient(to right, white 0%, transparent 10%, transparent 90%, white 100%);
    }
    .timeline-overlay {
      background: rgba(255,255,255,0.6);
      padding: 2rem 0;
    }
    /* Box-Design wie bei Flipper-Timeline */
    .timeline-item {
      border: 1px solid rgba(var(--bs-primary-rgb), 0.3);
      border-radius: 0.25rem;
      padding: 1rem 2rem;
      background: rgba(var(--bs-primary-rgb), 0.10);
    }
  </style>
{% endblock %}

{% block content %}
<!-- Hero ----------------------------------------------------------------- -->
<header class="text-white text-center py-5 hero-bg">
  <div class="hero-overlay p-4">
    <h1 class="display-4 fw-bold">Aixtraball&nbsp;e.V.</h1>
    <p class="lead mb-0">Flipper‑Kultur bewahren · erleben · teilen</p>
  </div>
</header>

<!-- Mission -------------------------------------------------------------- -->
<section class="py-5">
  <div class="container">
    <div class="row align-items-center g-4">
      <div class="col-md-6">
        <h2 class="mb-3">Unsere Mission</h2>
        <p>
          Am Flugplatz <strong>Aachen‑Merzbrück</strong> bewahren wir auf rund
          <strong>300&nbsp;m²</strong> Flipper‑Kultur. In unserer Halle warten
          mehr als <strong>50 restaurierte Automaten</strong> darauf, entdeckt zu
          werden – vom EM‑Klassiker bis zum neuesten Stern‑Titel.
        </p>
        <ul class="list-unstyled">
          <li class="mb-2"><i class="bi bi-tools me-2 text-primary"></i>
              Restauration &amp; Reparatur historischer Geräte</li>
          <li class="mb-2"><i class="bi bi-mortarboard me-2 text-primary"></i>
              Workshops &amp; Technik‑Einblicke</li>
          <li><i class="bi bi-people me-2 text-primary"></i>
              Offene Spieltage &amp; Turniere</li>
        </ul>
      </div>
      <div class="col-md-6">
        <img src="{{ url_for('static', filename='images/else/repair1.jpg') }}"
             class="img-fluid rounded shadow" alt="Restauration">
      </div>
    </div>
  </div>
</section>

<!-- Timeline mit gekacheltem Hintergrund -->
<section class="timeline-section" style="background-image: url('{{ url_for('static', filename='images/timeline/background_X2.jpg') }}');">
  <div class="timeline-overlay">
    <div class="container">
      <h2 class="mb-5 text-center">Unsere Geschichte</h2>
      {% if timeline %}
        <div class="timeline">
          {% for t in timeline %}
          <div class="timeline-item">
            <span class="timeline-date">{{ t.date | datetimeformat("%m/%Y") }}</span>
            <h3 class="h5 mt-2">{{ t.title }}</h3>
            <p>{{ t.description }}</p>
            {% if t.image %}
              <img src="{{ t.image | asset }}" class="img-fluid rounded shadow mb-2" alt="{{ t.title }}">
            {% endif %}
          </div>
          {% endfor %}
        </div>
      {% else %}
        <p class="text-center text-muted">Noch keine Meilensteine eingetragen.</p>
      {% endif %}
    </div>
  </div>
</section>

<!-- Satzung (Kurzfassung) ------------------------------------------------ -->
{% set paras = [
  ('Präambel',
    'In den 60er Jahren bis in die 90er Jahre waren Flipperautomaten ein fester Bestandteil der Unterhaltungskultur …'),
  ('§1 Name & Sitz',
    '1. Der Verein führt den Namen „AixtraBall e.V.“<br>2. Er hat seinen Sitz in Würselen …'),
  ('§2 Zweck',
    'Der Zweck des Vereins ist die Förderung von Kunst und Kultur …'),
  ('§4 Mitgliedschaft',
    '1. Mitglieder können alle natürlichen und juristischen Personen werden …'),
  ('§5 Mitgliedsbeiträge',
    '1. Von den Vereinsmitgliedern werden Monatsbeiträge von derzeit 15 € erhoben …'),
  ('§6 Rechte & Pflichten',
    '1. Mitglieder erhalten Zugang zu den Vereinsräumlichkeiten …')
] %}
<section class="py-5">
  <div class="container">
    <h2 class="mb-4 text-center">
      Unsere Satzung&nbsp;<small class="text-muted">(Kurzfassung)</small>
    </h2>

    <div class="accordion" id="satzungAcc">
      {% for para in paras %}
      <div class="accordion-item">
        <h2 class="accordion-header" id="h{{ loop.index0 }}">
          <button class="accordion-button {{ '' if loop.first else 'collapsed' }}"
                  type="button"
                  data-bs-toggle="collapse"
                  data-bs-target="#c{{ loop.index0 }}"
                  aria-expanded="{{ 'true' if loop.first else 'false' }}">
            {{ para[0] | safe }}
          </button>
        </h2>
        <div id="c{{ loop.index0 }}"
             class="accordion-collapse collapse {{ 'show' if loop.first else '' }}"
             data-bs-parent="#satzungAcc">
          <div class="accordion-body">
            {{ para[1] | safe }}
          </div>
        </div>
      </div>
      {% endfor %}
    </div>

    <p class="text-center mt-4">
      <a class="btn btn-outline-primary"
         href="{{ url_for('static', filename='docs/satzung.pdf') }}"
         target="_blank">Vollständige Satzung (PDF)</a>
    </p>
  </div>
</section>

<!-- Call‑to‑Action ------------------------------------------------------- -->
<section class="py-5 bg-primary text-white text-center">
  <div class="container">
    <h2 class="mb-3">Mitglied werden?</h2>
    <p class="lead col-lg-8 mx-auto">
      Ab 15 € monatlich (Jugendliche 10 €)
      hilfst du beim </br>Restaurieren und Reparieren und erhältst Zugang zu Events.
    </p>
    <a class="btn btn-light btn-lg" href="{{ url_for('kontakt') }}">Jetzt anfragen</a>
  </div>
</section>

<!-- Sponsoren ----------------------------------------------------------- -->
<section class="py-5">
  <div class="container text-center">
    <h2 class="mb-4">Unsere Förderer</h2>
    <div class="d-flex flex-wrap justify-content-center gap-4">
      <img src="{{ url_for('static', filename='images/foerderer/auto_koch.png') }}" height="60" alt="Auto Koch">
      <img src="{{ url_for('static', filename='images/foerderer/avo_pinball-klein.png') }}" height="60" alt="Avo Pinball">
      <img src="{{ url_for('static', filename='images/foerderer/krings.png') }}" height="60" alt="Krings & Krings Anwälte">
      <img src="{{ url_for('static', filename='images/foerderer/pinwitch.png') }}" height="60" alt="PinWitch">
      <img src="{{ url_for('static', filename='images/foerderer/skydisc.png') }}" height="60" alt="Skydisc">
    </div>
  </div>
</section>
{% endblock %}

{% block scripts %}
  {{ super() }}
  <script>
    /* Timeline‑Animation */
    window.addEventListener('load', () => {
      const items = document.querySelectorAll('.timeline-item');
      if (!('IntersectionObserver' in window)) { items.forEach(i => i.classList.add('show')); return; }
      const io = new IntersectionObserver((entries, obs) => {
        entries.forEach(e => {
          if (e.isIntersecting) { e.target.classList.add('show'); obs.unobserve(e.target); }
        });
      }, { threshold: .15 });
      items.forEach(el => io.observe(el));
    });
  </script>
{% endblock %}