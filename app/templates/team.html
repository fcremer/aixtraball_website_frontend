{% extends "base.html" %}

{% block head_extra %}
  <link rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/swiper@9/swiper-bundle.min.css" />

  <style>
    /* CSS für Slide-Breiten und Pfeile kann hier oder in externer CSS sein */

    /* 1) Slide-Breite */
    .teamSwiper .swiper-slide { width: 440px; }
    @media (min-width: 768px) {
      .teamSwiper .swiper-slide { width: 480px; }
    }
    @media (min-width: 992px) {
      .teamSwiper .swiper-slide { width: 520px; }
    }

    /* 3) Navigation-Pfeile */
    .teamSwiper .swiper-button-prev,
    .teamSwiper .swiper-button-next {
      color: var(--bs-primary);
      width: 44px;
      height: 44px;
      z-index: 10;
    }
    .teamSwiper .swiper-button-prev::after,
    .teamSwiper .swiper-button-next::after {
      font-size: 28px;
    }
  </style>
  <style>
    /* Hero-Bild für Team-Seite */
    .hero-flipper {
      background: url('{{ url_for("static", filename="/images/else/background_person.jpg") }}') center/cover;
      min-height: 45vh;
    }
    .hero-flipper .overlay {
      background: rgba(var(--bs-primary-rgb), .65);
    }
  </style>
{% endblock %}

{% block content %}
<!-- Hero-Banner wie auf Flipper-All -->
<header class="hero-flipper d-flex align-items-center text-white text-center">
  <div class="container overlay py-5">
    <h1 class="display-4 fw-bold">Unser Team</h1>
    <p class="lead mb-0">Lerne unser engagiertes Team kennen</p>
  </div>
</header>
{# Section definiert die Gesamthöhe #}
<section class="py-5 bg-light team-fullheight">
  {# Container zentriert den Inhalt und erbt die Höhe #}
  <div class="container h-100"> {# Entfernt: d-flex flex-column #}

    {# Swiper erbt die Höhe vom Container. Wichtig: overflow: hidden wird via CSS hinzugefügt #}
    <div class="swiper teamSwiper h-100"> {# Entfernt: flex-grow-1 und style="min-height: 0;" #}
      {# Wrapper braucht volle Höhe für die Slides #}
      <div class="swiper-wrapper h-100">

        {% for member in members %}
        {# Slide braucht volle Höhe #}
        <div class="swiper-slide h-100">
          {# Karte braucht volle Höhe und Flexbox für interne Anordnung #}
          <div class="card h-100 shadow-sm d-flex flex-column">
            <img src="{{ member.image | asset }}"
                 class="card-img-top"
                 alt="{{ member.name }}">
            {# Card-Body nutzt Flexbox für interne Anordnung #}
            <div class="card-body text-center d-flex flex-column">
              {# Titel und Rolle bleiben oben #}
              <div>
                 <h5 class="card-title mb-1">{{ member.name }}</h5>
                 <p class="card-subtitle text-muted mb-2">{{ member.role }}</p>
              </div>
              {% if member.bio %}
              {# Scrollbarer Bereich für die Biografie #}
              <div class="bio-scroll-area">
                <p class="card-text small mt-2">{{ member.bio }}</p>
              </div>
              {% endif %}
            </div> {# Ende card-body #}
          </div> {# Ende card #}
        </div> {# Ende swiper-slide #}
        {% endfor %}

      </div> {# Ende swiper-wrapper #}

      <div class="swiper-button-prev"></div>
      <div class="swiper-button-next"></div>

    </div> {# Ende swiper #}
  </div> {# Ende container #}
</section> {# Ende team-fullheight section #}
{% endblock %}

{% block scripts %}
  <script src="https://cdn.jsdelivr.net/npm/swiper@9/swiper-bundle.min.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      new Swiper('.memberSwiper',{
        effect      : 'fade',
        fadeEffect  : { crossFade:true },
        slidesPerView:1,
        speed       : 600,
        navigation  : {
          nextEl: '.memberSwiper .swiper-button-next',
          prevEl: '.memberSwiper .swiper-button-prev'
        },
        pagination  : {
          el: '.memberSwiper .swiper-pagination',
          clickable:true
        },
        keyboard    : { enabled:true },
      });
    });
  </script>
{% endblock %}